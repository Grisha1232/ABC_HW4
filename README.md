# Архитектура вычислительных систем. ИДЗ №4 Вариант 15. Селезнев Григорий Ильич БПИ217.

## Вариант 15:
**Задача о клумбе.** На клумбе растет 40 цветов, за ними непрерывно следят
два садовника и поливают увядшие цветы, при этом оба садовника очень боятся полить один и тот же цветок, который еще не начал вянуть. Создать
многопоточное приложение, моделирующее состояния цветков на клумбе и действия садовников. 

## Как устроена программа:
* Для запуска программы с использованием консольного ввода:
```
./program.exe
```
> После запуска программы с использованием консольного ввода можно выбрать другой вариант ввода (Подсказки в программе имеются)
* Для запуска программы с использованием рандомизированного ввода:
```
./program.exe number
```
> Вместо number нужно ввести число (seed для рандомизации)
* Для запуска программы с использованием файлов 
```
./program.exe input.txt output.txt
```
> Файл **input.txt** используется для получения данных, файл **output.txt** используется для вывода информации  
> Оба файла должны находится рядом с **program.exe** (запускаемая программа)

## Отчет на 4 балла:
### 1. Приведенно решение на С++ с использованием библиотеки "pthread.h":
> [main.cpp](https://github.com/Grisha1232/ABC_HW4/blob/4a98ae8ac903b974c079040e17cfe2da666aafaa/main.cpp)

### 2. Модель параллельных вычислений:
> Для реализации моделирования этого процесса я использовал 3 потока. первый поток отвечает за изменения состояние цветов (пользователь сам выбирает какой цветок начнет вянуть). Остальные два потока используется для Садовников, которые проверяют есть ли цветок, который нужно полить.

### 3. Входные данные + вариативность
> Пользователь вводит кол-во дней, за котором хочет пронаблюдать. После этого вводит **n** для текущего для кол-во цветков, которые увянут, и вводит **n** индексов (именно индексы то есть от 0 до 39) цветков, которые увянут. После этого начнется моделироваться день садовников.  
> Порядок садовников для полития одно цветка неизвестен (если они идут друг за другом это случайность).

## Отчет на 5 баллов:

### 1. В программу добавлены комменты для объяснение работы потоков + описание переменных
> [main.cpp](https://github.com/Grisha1232/ABC_HW4/blob/4a98ae8ac903b974c079040e17cfe2da666aafaa/main.cpp)

### 2. (Возможный) сценарий:
> 1. Кол-во наблюдаемых дней равно одному (то есть один раз промоделируется ситуация)
> 2. Запускаются все потоки. Во время ввода кол-во и индексов цветков, садовники проверяют на наличие вянущих цветков. Если один садовник обнаружил такой цветок, то он его поливает, не давая другому полить его снова.
> 3. Садовники могут по очереди поливать цветки, а может один садовник полить все цветки.
> 4. Как только вянущие цветки закончились, день считается оконченным

## Отчет на 6 баллов:
### 1. обобщенный алгоритм:
> При старте программы выибрается ввод данных (консоль / рандом / файл). После этого запускаются потоки: поток клумбы с функцией specifyWhichFlowersGonnaFade и два потока садовника с функцией waterFlower. Садовники непрерывно следят за состоянием клумбы и проверяют нет ли вянущего цветка. Поток клумбы запрашивает данные (пользователя через консоль / рандомизирует / читает с файла) и отражает их на клумбе. Как только садовник замечает вянущий цветок поток на запись / чтения клумбы закрывается и садовник поливает цветочек и открывает опять доступ к записи / чтению клумбы. Поток клумбы тоже блокирует потоки при изменении состоянии клумбы.
### 2. Реализован ввод данных из командной строки
> Смотри на **Как устроена программа** наверху отчета

## отчет на 7 баллов:
### 1. Добавлен ввод данных через файл
Чтобы программа работала нормально файл **input.txt** должен иметь следующую структуру:
```
days
n_flowers_this_day
[indexes]
n_flowers_this_day
[indexes]
n_flowers_this_day
[indexes]
...
```
Где:
* **days** - кол-во дней для моделирования
* **n_flowers_this_day** - кол-во цветов которые должны увянуть этим днем (число от 1 до 40 [1 <= **n_flowers_this_day** <= 40])
